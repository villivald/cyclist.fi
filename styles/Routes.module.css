.layout {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  container-type: inline-size;
  margin-block-end: var(--offset-2xl);
}

.title {
  --base-size: 1rem;
  --char-ratio: 0.6;
  --safe-margin: 0.1;

  grid-column: 1 / 13;
  grid-row: 1 / 3;
  place-self: center;
  max-width: 100vw;
  white-space: nowrap;
  overflow: hidden;

  /* Dynamic font sizing based on string length and viewport */
  font-size: clamp(
    calc(var(--base-size) * 2),
    calc(
      (100vw * (1 - var(--safe-margin) * 2)) /
        (var(--stringLength) * var(--char-ratio))
    ),
    calc(var(--base-size) * 20)
  );

  /* Fallback for very long titles */
  @container (max-width: 400px) {
    font-size: clamp(
      calc(var(--base-size) * 1.5),
      calc(
        (100vw * (1 - var(--safe-margin) * 2)) / (var(--stringLength) * 0.8)
      ),
      calc(var(--base-size) * 12)
    );
  }

  color: hsl(from var(--pageColor) h s l / var(--route-color-opacity));
}

.mainContainer {
  grid-column: 2 / 12;
  grid-row: 2 / 14;
}

/* Responsive adjustments */
@media (width < 1100px) {
  .title {
    --char-ratio: 0.65;
  }
}

@media (width < 700px) {
  .title {
    --char-ratio: 0.7;
    --base-size: 0.875rem;
  }
}

@media (width < 500px) {
  .title {
    --char-ratio: 0.6;
    --safe-margin: 0.12;

    /* Ensure minimum readable size on mobile */
    font-size: clamp(
      calc(var(--base-size) * 2.5),
      calc(
        (100vw * (1 - var(--safe-margin) * 2)) /
          (var(--stringLength) * var(--char-ratio))
      ),
      calc(var(--base-size) * 20)
    );
  }
}
